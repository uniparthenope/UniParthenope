<Page class="page"
      navigatingTo="onNavigatingTo"
      actionBarHidden="false"
      xmlns="http://schemas.nativescript.org/tns.xsd"
      xmlns:lv="nativescript-ui-listview"
      xmlns:x="nativescript-statusbar">

    <ActionBar class="action-bar" title="UniParthenope">
        <ActionItem icon="~/images/logo_parth.png"
                    tap="onGeneralMenu"
                    android.position="right"
                    ios:visibility="collapsed"
        />

        <ActionItem icon="res://menu"
                    ios:visibility="collapsed"
                    tap="onDrawerButtonTap"
                    android.position="right">
        </ActionItem>

        <ActionItem icon="res://navigation/logo_parth"
                    android:visibility="collapsed"
                    tap="onGeneralMenu"
                    ios.position="right">
        </ActionItem>
        <ActionItem icon="res://navigation/menu"
                    android:visibility="collapsed"
                    tap="onDrawerButtonTap"
                    ios.position="right">
        </ActionItem>

    </ActionBar>

    <GridLayout height="100%">
        <StackLayout height="100%">
            <GridLayout class="two-color-gradient" width="100%" height="10%" verticalAlignment="top">
                <Label class="textPrimary" text="Prenotazioni" horizontalAlignment="center" verticalAlignment="center"/>
            </GridLayout>

            <StackLayout margin="5 15 5 15" id="scelta_accesso" visibility="visible">
                <Label id="title" horizontalAlignment="center" fontSize="20" margin="5 5 5 5" text="Lezioni del 21/09/2020"/>

                <Label margin="5 5 5 5" text="Selezionare un corso dall'elenco:"/>

                <StackLayout margin="5 10 5 10" borderRadius="20%" borderWidth="2" height="30%" width="100%">
                    <ListPicker id="listpicker" items="{{ courses }}" textField="nome" selectedIndex="0" selectedValue="{{ selectedItem }}" loaded="onListPickerLoaded" />
                </StackLayout>
                <Button backgroundColor="#22384f" color="white" id="selection_button" margin="5 5 5 5" class="btn" text="Cerca" ontap="ontap_save" verticalAlignment="bottom"/>

                <Label margin="5 5 5 5" text="Selezionare una lezione dall'elenco:"/>

                <GridLayout  borderRadius="20%" borderWidth="2">
                    <StackLayout id="activityIndicator" visibility="collapsed" borderRadius="20%" verticalAlignment="center" height="100%" width="100%" backgroundColor="rgba(0,0,0,0.5)">
                        <Label text="Ricerca Lezioni..." horizontalAlignment="center" class="textPrimary"/>
                        <ActivityIndicator horizontalAlignment="center" busy="true"/>
                    </StackLayout>
                    <Label id="no_lession" visibility="collapsed" horizontalAlignment="center" verticalAlignment="center" margin="5 5 5 5" text="Nessuna lezione trovata!"/>

                    <ScrollView verticalAlignment="top" margin="5 5 5 5" height="95%">
                       <ListView id="lezioni_listview" class="list-group" items="{{ docentiLezioni }}" itemTap="onItemTap" marginRight="5" marginLeft="5">
                            <ListView.itemTemplate >
                                <GridLayout rows="*,*,*,*">
                                    <GridLayout row="0" columns="auto,*,auto" backgroundColor="#22384f" color="white" borderRadius="5%" padding="5 5 5 5">
                                        <StackLayout col="0" orientation="vertical" horizontalAlignment="left">
                                            <Label class="{{ classe }}" color="white" borderWidth="0" fontSize="12" text="Inizio: " marginRight="5"/>
                                            <Label class="{{ classe }}" color="white" borderWidth="0" fontSize="16" text="{{ start }}"/>
                                        </StackLayout>
                                        <Label col="1" borderWidth="0" text="{{ prof }}" horizontalAlignment="center" textWrap="true" textAlignment="center"/>

                                        <StackLayout col="2" orientation="vertical" horizontalAlignment="right">
                                            <Label class="{{ classe }}" color="white" borderWidth="0" fontSize="12" text="Fine: " marginRight="5"/>
                                            <Label class="{{ classe }}" color="white" borderWidth="0" fontSize="16" text="{{ end }}"/>
                                        </StackLayout>
                                    </GridLayout>
                                    <Label row="1" class="{{ classe }}" borderWidth="0" text="{{ nome }}" horizontalAlignment="center" textWrap="true" textAlignment="center"/>
                                    <StackLayout row="2" orientation="horizontal" horizontalAlignment="center">
                                        <Label class="{{ classe }}" marginRight="10" borderWidth="0" fontSize="12" text="{{ room_place }}"/>
                                        <Label class="{{ classe }}"  borderWidth="0" fontSize="12" text="{{ room }}"/>
                                    </StackLayout>

                                    <StackLayout row="3" orientation="vertical"  width="100%" >
                                        <StackLayout orientation="vertical"  width="100%" >
                                        </StackLayout>

                                        <StackLayout orientation="horizontal" horizontalAlignment="center">
                                            <Progress maxValue="100" value="50" width="70%" marginRight="10" verticalAlignment="center"/>
                                            <Label class="{{ classe }}"  borderWidth="0" fontSize="12" text="{{ capacity }}" verticalAlignment="center"/>
                                            <Label class="{{ classe }}"  borderWidth="0" fontSize="12" text="/100 Posti" verticalAlignment="center"/>
                                        </StackLayout>

                                    </StackLayout>
                                </GridLayout>
                            </ListView.itemTemplate>
                        </ListView>
                    </ScrollView>
                </GridLayout>

            </StackLayout>
        </StackLayout>

    </GridLayout>
</Page>
